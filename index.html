<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Red Tide - The Revolution Simulator</title>
<link rel="stylesheet" href="src/revolution-style.css">
</head>
<body>
<div id="container">
  <div id="game">
    <canvas id="canvas" width="1280" height="800"></canvas>
    
    <!-- OVERLAY HUD COMPLETO -->
    <div id="canvas-overlay">
      <!-- TOP BAR - Statistiche Principali -->
      <div class="stats-bar">
        <div class="stat-item" title="Denaro disponibile per assumere compagni e stampare materiale.&#10;&#10;Entrate: Donazioni dai convertiti (ogni 10s)&#10;Uscite: Stipendi compagni (ogni 10s)&#10;&#10;Vedi il pannello 'Bilancio Economico' per dettagli.">
          <span class="stat-icon">üí∂</span>
          <div class="stat-content">
            <div class="stat-label">Fondi <span class="stat-info">‚ìò</span></div>
            <div class="stat-value" id="money-overlay">0‚Ç¨</div>
            <div class="stat-subtext" id="money-rate">+0‚Ç¨/10s</div>
          </div>
        </div>
        
        <div class="stat-item" title="Tempo trascorso dall'inizio della partita.&#10;&#10;Usato per calcolare statistiche e progressione.">
          <span class="stat-icon">‚è±Ô∏è</span>
          <div class="stat-content">
            <div class="stat-label">Tempo</div>
            <div class="stat-value" id="time-overlay">0s</div>
          </div>
        </div>
        
        <div class="stat-item" title="Cittadini attualmente nel circolo / Capacit√† massima.&#10;&#10;Quando pieno:&#10;‚Ä¢ I nuovi cittadini non entrano&#10;‚Ä¢ Formano code all'esterno&#10;‚Ä¢ Perdono pazienza pi√π velocemente&#10;&#10;Espandi il circolo per aumentare la capacit√† (+5 per espansione).">
          <span class="stat-icon">üë•</span>
          <div class="stat-content">
            <div class="stat-label">Cittadini</div>
            <div class="stat-value"><span id="citizen-count-overlay">0</span>/<span id="citizen-cap-overlay">15</span></div>
          </div>
        </div>
        
        <div class="stat-item" title="Compagni attivi che lavorano per la rivoluzione.&#10;&#10;Tipi disponibili:&#10;‚Ä¢ Volontario (150‚ö°): +10% conversione, 5‚Ç¨/10s&#10;‚Ä¢ Organizzatore (250‚ö°): +15% conversione, -20% decay coscienza, 7‚Ç¨/10s&#10;‚Ä¢ Propagandista (400‚ö°): +25% conversione, -30% decay coscienza, 10‚Ç¨/10s&#10;&#10;‚ö†Ô∏è Se non hai abbastanza soldi, smettono di lavorare!">
          <span class="stat-icon">ü§ù</span>
          <div class="stat-content">
            <div class="stat-label">Compagni</div>
            <div class="stat-value" id="comrades-overlay">0</div>
          </div>
        </div>
        
        <div class="stat-item" title="Tempo tra uno spawn e l'altro di nuovi cittadini.&#10;&#10;Pi√π √® basso, pi√π veloce √® il flusso di visitatori.&#10;&#10;Influenzato da:&#10;‚Ä¢ Numero di tematiche attive&#10;‚Ä¢ Eventi casuali&#10;‚Ä¢ Fase di gioco">
          <span class="stat-icon">‚ö°</span>
          <div class="stat-content">
            <div class="stat-label">Spawn</div>
            <div class="stat-value" id="spawn-rate-overlay">2.5s</div>
          </div>
        </div>
        
        <div class="stat-item" title="Risorsa necessaria per azioni del movimento.&#10;&#10;Si ottiene da:&#10;‚Ä¢ Conversioni (+1)&#10;‚Ä¢ Espansioni dello spazio&#10;&#10;Si usa per:&#10;‚Ä¢ Assemblee&#10;‚Ä¢ Stampa tematiche&#10;‚Ä¢ Espansioni">
          <span class="stat-icon">‚ö°</span>
          <div class="stat-content">
            <div class="stat-label">Influenza</div>
            <div class="stat-value" id="influence-overlay">30</div>
          </div>
        </div>
        
        <div class="stat-item" title="Numero totale di cittadini convertiti alla causa.&#10;&#10;I convertiti donano fondi passivamente in base al loro tipo:&#10;‚Ä¢ Lavoratore: 0.20‚Ç¨/10s&#10;‚Ä¢ Precario: 0.15‚Ç¨/10s&#10;‚Ä¢ Disoccupato: 0.03‚Ç¨/10s&#10;‚Ä¢ Studente: 0.05‚Ç¨/10s&#10;‚Ä¢ Intellettuale: 0.10‚Ç¨/10s&#10;&#10;Possono abbandonare se la coscienza √® bassa!">
          <span class="stat-icon">üö©</span>
          <div class="stat-content">
            <div class="stat-label">Convertiti</div>
            <div class="stat-value" id="converts-overlay">0</div>
          </div>
        </div>
        
        <div class="stat-item" title="La coscienza di classe influenza la stabilit√† dei convertiti.&#10;&#10;‚â•70%: Stabilit√† alta, pochi abbandoni&#10;50-70%: Stabilit√† normale, abbandoni naturali (1%)&#10;30-50%: Stabilit√† bassa, abbandoni frequenti (3%)&#10;<30%: CRITICO! Abbandoni massivi (8%)">
          <span class="stat-icon">üß†</span>
          <div class="stat-content">
            <div class="stat-label">Coscienza di Classe</div>
            <div class="stat-value" id="consciousness-overlay">50%</div>
          </div>
        </div>
        
        <div class="stat-item" title="Potere delle assemblee collettive. Aumenta organizzando assemblee e dura per tutta la fase.&#10;&#10;LIVELLI BONUS:&#10;&#10;üî• Livello 1 (1-25%):&#10;‚Ä¢ +5% probabilit√† conversioni&#10;&#10;üî• Livello 2 (25-50%):&#10;‚Ä¢ +10% probabilit√† conversioni&#10;‚Ä¢ -10% decay coscienza&#10;&#10;üî•üî• Livello 3 (50-75%):&#10;‚Ä¢ +15% probabilit√† conversioni&#10;‚Ä¢ -20% decay coscienza&#10;‚Ä¢ +5% donazioni&#10;&#10;üî•üî•üî• Livello 4 (75-100%):&#10;‚Ä¢ +20% probabilit√† conversioni&#10;‚Ä¢ -30% decay coscienza&#10;‚Ä¢ +10% donazioni">
          <span class="stat-icon">üì¢</span>
          <div class="stat-content">
            <div class="stat-label">Potere Assembleare</div>
            <div class="stat-value" id="assembly-power-overlay">0%</div>
          </div>
        </div>
      </div>
      
      <!-- BOTTOM BAR - Azioni -->
      <div class="action-toolbar">
        <button id="assembly-overlay" class="overlay-btn" title="Organizza un'assemblea per aumentare il Potere Assembleare.&#10;&#10;Effetto: +25% Potere Assembleare (permanente per la fase)&#10;Costo: 50‚ö° (aumenta ogni uso: +60%)&#10;&#10;Il Potere Assembleare fornisce bonus permanenti:&#10;‚Ä¢ Aumenta probabilit√† conversioni (fino a +20%)&#10;‚Ä¢ Riduce decay coscienza (fino a -30%)&#10;‚Ä¢ Aumenta donazioni (fino a +10%)&#10;&#10;Investi presto per massimizzare i benefici!">
          <span class="overlay-icon">üì¢</span>
          <span class="overlay-label">Assemblea</span>
          <span class="overlay-cost" id="assembly-cost-overlay">50‚ö°</span>
        </button>
        
        <button id="restock-all-overlay" class="overlay-btn" title="Stampa volantini, opuscoli e materiale propagandistico.&#10;&#10;Rifornisce tutte le tematiche di +10 stock&#10;Costo: Somma dei costi di tutte le tematiche&#10;&#10;Utile quando il materiale scarseggia per:&#10;‚Ä¢ Evitare che i cittadini vadano via delusi&#10;‚Ä¢ Mantenere alto il flusso di conversioni">
          <span class="overlay-icon">üìÑ</span>
          <span class="overlay-label">Stampa</span>
          <span class="overlay-cost" id="restock-cost-overlay">0‚Ç¨</span>
        </button>
        
        <button id="expand-overlay" class="overlay-btn" title="Espandi la capacit√† del circolo.&#10;&#10;+5 Capacit√† massima cittadini&#10;Costo: 100‚ö° (raddoppia ogni uso)&#10;&#10;Utile quando il circolo √® sempre pieno per:&#10;‚Ä¢ Permettere pi√π conversioni simultanee&#10;‚Ä¢ Evitare code e impazienza&#10;‚Ä¢ Scalare il movimento">
          <span class="overlay-icon">üèóÔ∏è</span>
          <span class="overlay-label">Espandi</span>
          <span class="overlay-cost" id="expand-cost-overlay">100‚ö°</span>
        </button>
      </div>
      
      <!-- LOG ATTIVIT√Ä CANVAS - Posizionato in basso a sinistra -->
      <div class="canvas-log-panel">
        <div class="canvas-log-header">üìú Log Attivit√†</div>
        <div id="canvas-log" class="canvas-log-content"></div>
      </div>
    </div>
  </div>
  <div id="ui">
    <!-- HEADER -->
    <div class="header">
      <div class="game-title-compact">
        <span class="title-icon">üö©</span>
        <div>
          <div class="title-main">
            Red Tide
            <span class="version-badge" id="version-badge">v0.1.0</span>
          </div>
          <div class="title-sub">Revolution Simulator</div>
        </div>
      </div>
    </div>

    <!-- PHASE INFO -->
    <div class="phase-info">
      <div class="phase-name" id="phase-name">FASE 1: IL CIRCOLO</div>
      
      <!-- Obiettivo Converti -->
      <div class="phase-objective">
        <div class="objective-header">
          <span class="objective-label">‚úä Convertiti</span>
          <span class="objective-values">
            <span id="phase-converts">0</span>/<span id="phase-converts-goal">50</span>
          </span>
        </div>
        <div class="progress-bar modern">
          <div class="progress-fill converts" id="phase-converts-bar" style="width: 0%"></div>
        </div>
      </div>
      
      <!-- Obiettivo Influenza -->
      <div class="phase-objective">
        <div class="objective-header">
          <span class="objective-label">‚ö° Influenza</span>
          <span class="objective-values">
            <span id="phase-influence">100</span>/<span id="phase-influence-goal">500</span>
          </span>
        </div>
        <div class="progress-bar modern">
          <div class="progress-fill influence" id="phase-influence-bar" style="width: 20%"></div>
        </div>
      </div>
    </div>

    <div class="divider"></div>

    <!-- LOG ATTIVIT√Ä - Spostato qui per maggiore visibilit√† -->
    <div class="panel log-panel">
      <div class="panel-title">üìú Log Attivit√†</div>
      <div id="log" class="log-content"></div>
    </div>
    
    <div class="divider"></div>
    
    <!-- DONATION BREAKDOWN -->
    <div class="panel donation-panel">
      <div class="panel-title">üí∞ Bilancio Economico (ogni 10s)</div>
      
      <!-- ENTRATE -->
      <div class="panel-subtitle" style="color: #4ade80; margin-bottom: 8px;">üìà ENTRATE</div>
      <div id="donation-breakdown" class="donation-list">
        <!-- Popolato dinamicamente -->
      </div>
      
      <div class="donation-total" style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 8px; margin-bottom: 16px;">
        <span class="donation-label">Totale Entrate</span>
        <span class="donation-value" id="donation-total" style="color: #4ade80;">+0.0‚Ç¨/10s</span>
      </div>
      
      <!-- USCITE -->
      <div class="panel-subtitle" style="color: #ef4444; margin-bottom: 8px;">üìâ USCITE</div>
      <div id="upkeep-breakdown" class="donation-list">
        <!-- Popolato dinamicamente -->
      </div>
      
      <div class="donation-total" style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 8px; margin-bottom: 16px;">
        <span class="donation-label">Totale Uscite</span>
        <span class="donation-value" id="upkeep-total" style="color: #ef4444;">-0.0‚Ç¨/10s</span>
      </div>
      
      <!-- BILANCIO NETTO -->
      <div class="donation-total" style="border-top: 2px solid var(--accent-red); padding-top: 8px; font-weight: bold;">
        <span class="donation-label">üíµ BILANCIO NETTO</span>
        <span class="donation-value" id="net-balance">+0.0‚Ç¨/10s</span>
      </div>
    </div>
    
    <div class="divider"></div>
    
    <!-- CONVERSION STATISTICS -->
    <div class="panel conversion-stats">
      <div class="panel-title">üìà Statistiche Conversioni</div>
      
      <div class="conversion-breakdown">
        <div class="conversion-row">
          <span class="conversion-type">üü¢ Ricettivi</span>
          <span class="conversion-count" id="converts-receptive">0</span>
        </div>
        <div class="conversion-row">
          <span class="conversion-type">üü° Neutrali</span>
          <span class="conversion-count" id="converts-neutral">0</span>
        </div>
        <div class="conversion-row">
          <span class="conversion-type">üî¥ Scettici</span>
          <span class="conversion-count" id="converts-skeptical">0</span>
        </div>
      </div>
      
      <div class="success-rate">
        <span class="success-label">Tasso di Successo</span>
        <span class="success-value" id="success-rate">0%</span>
      </div>
    </div>
    
    <div class="divider"></div>
    
    <!-- CITIZEN TYPES LEGEND -->
    <div class="panel citizen-legend">
      <div class="panel-title">üë• Tipi di Cittadini</div>
      
      <div class="legend-grid">
        <div class="legend-item">
          <span class="legend-color" style="background: #3498db;"></span>
          <span class="legend-label">Studente</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #e67e22;"></span>
          <span class="legend-label">Lavoratore</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #95a5a6;"></span>
          <span class="legend-label">Disoccupato</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #9b59b6;"></span>
          <span class="legend-label">Freelancer</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #1abc9c;"></span>
          <span class="legend-label">Pensionato</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #f1c40f;"></span>
          <span class="legend-label">Intellettuale</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #e74c3c;"></span>
          <span class="legend-label">Attivista</span>
        </div>
      </div>
    </div>
    
    <div class="divider"></div>

    <!-- TOPICS -->
    <div class="panel topics-panel">
      <div class="panel-title">üìö Tematiche Disponibili</div>
      <div id="topics-list" class="topics-grid"></div>
    </div>

    <div class="divider"></div>

    <!-- COMRADES -->
    <div class="panel comrades-panel">
      <div class="panel-title">‚úä Compagni</div>
      <div id="comrades-list" class="comrades-grid"></div>
      <div class="comrades-available">
        <div class="panel-subtitle">Assumi nuovi compagni:</div>
        <div id="available-comrades" class="available-grid"></div>
      </div>
    </div>

    <div class="divider"></div>

    <!-- ACTIONS -->
    <div class="panel actions-panel">
      <div class="panel-title">üéØ Azioni</div>
      <div class="action-buttons">
        <button id="assembly" class="action-btn primary" title="Organizza un'assemblea per aumentare il Potere Assembleare.&#10;&#10;Effetto: +25% Potere Assembleare (permanente per la fase)&#10;Costo: 50‚ö° (aumenta ogni uso: +60%)&#10;&#10;Il Potere Assembleare fornisce bonus permanenti:&#10;‚Ä¢ Aumenta probabilit√† conversioni (fino a +20%)&#10;‚Ä¢ Riduce decay coscienza (fino a -30%)&#10;‚Ä¢ Aumenta donazioni (fino a +10%)&#10;&#10;Investi presto per massimizzare i benefici!">
          <span class="btn-icon">üì¢</span>
          <div class="btn-content">
            <div class="btn-title">Assemblea Pubblica</div>
            <div class="btn-subtitle"><span id="assembly-cost">50</span>‚ö° ‚Ä¢ +25% Potere</div>
          </div>
        </button>
        
        <button id="restock-all" class="action-btn secondary" title="Stampa volantini, opuscoli e materiale propagandistico.&#10;&#10;Rifornisce tutte le tematiche di +10 stock&#10;Costo: Somma dei costi di tutte le tematiche&#10;&#10;Utile quando il materiale scarseggia per:&#10;‚Ä¢ Evitare che i cittadini vadano via delusi&#10;‚Ä¢ Mantenere alto il flusso di conversioni">
          <span class="btn-icon">üìÑ</span>
          <div class="btn-content">
            <div class="btn-title">Stampa Volantini</div>
            <div class="btn-subtitle">Rifornisci tutte le tematiche (+10)</div>
          </div>
        </button>
        
        <button id="expand" class="action-btn tertiary" title="Espandi la capacit√† del circolo.&#10;&#10;+5 Capacit√† massima cittadini&#10;Costo: 100‚ö° (raddoppia ogni uso)&#10;&#10;Utile quando il circolo √® sempre pieno per:&#10;‚Ä¢ Permettere pi√π conversioni simultanee&#10;‚Ä¢ Evitare code e impazienza&#10;‚Ä¢ Scalare il movimento">
          <span class="btn-icon">üèóÔ∏è</span>
          <div class="btn-content">
            <div class="btn-title">Espandi Circolo</div>
            <div class="btn-subtitle"><span id="expand-cost">100</span>‚ö° ‚Ä¢ +5 Capacit√†</div>
          </div>
        </button>
      </div>
      
      <div class="section-separator"></div>
      
      <div class="panel-title">‚öôÔ∏è Strumenti</div>
      <div class="utility-buttons">
        <button id="save-game" class="utility-btn">üíæ Salva</button>
        <button id="reset-game" class="utility-btn danger">üîÑ Reset</button>
        <button id="clear-citizens" class="utility-btn" style="display:none">üßπ Clear</button>
      </div>
    </div>

  </div>
</div>

<script type="module" src="src/revolution-main.js"></script>
</body>
</html>
