<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Red Tide - The Revolution Simulator</title>
<link rel="stylesheet" href="src/revolution-style.css">
</head>
<body>
<div id="container">
  <div id="game">
    <canvas id="canvas" width="1280" height="800"></canvas>
    
    <!-- OVERLAY HUD COMPLETO -->
    <div id="canvas-overlay">
      <!-- TOP BAR - Statistiche Principali -->
      <div class="stats-bar">
        <div class="stat-item" title="Denaro disponibile per assumere compagni e stampare materiale.&#10;&#10;Entrate: Donazioni dai convertiti (ogni 10s)&#10;Uscite: Stipendi compagni (ogni 10s)&#10;&#10;Vedi il pannello 'Bilancio Economico' per dettagli.">
          <span class="stat-icon">ğŸ’¶</span>
          <div class="stat-content">
            <div class="stat-label">Fondi <span class="stat-info">â“˜</span></div>
            <div class="stat-value" id="money-overlay">0â‚¬</div>
            <div class="stat-subtext" id="money-rate">+0â‚¬/10s</div>
          </div>
        </div>
        
        <div class="stat-item" title="Tempo trascorso dall'inizio della partita.&#10;&#10;Usato per calcolare statistiche e progressione.">
          <span class="stat-icon">â±ï¸</span>
          <div class="stat-content">
            <div class="stat-label">Tempo</div>
            <div class="stat-value" id="time-overlay">0s</div>
          </div>
        </div>
        
        <div class="stat-item" title="Cittadini attualmente nel circolo / CapacitÃ  massima.&#10;&#10;Quando pieno:&#10;â€¢ I nuovi cittadini non entrano&#10;â€¢ Formano code all'esterno&#10;â€¢ Perdono pazienza piÃ¹ velocemente&#10;&#10;Espandi il circolo per aumentare la capacitÃ  (+5 per espansione).">
          <span class="stat-icon">ğŸ‘¥</span>
          <div class="stat-content">
            <div class="stat-label">Cittadini</div>
            <div class="stat-value"><span id="citizen-count-overlay">0</span>/<span id="citizen-cap-overlay">15</span></div>
          </div>
        </div>
        
        <div class="stat-item" title="Compagni attivi che lavorano per la rivoluzione.&#10;&#10;Tipi disponibili:&#10;â€¢ Volontario (150âš¡): +10% conversione, 5â‚¬/10s&#10;â€¢ Organizzatore (250âš¡): +15% conversione, -20% decay coscienza, 7â‚¬/10s&#10;â€¢ Propagandista (400âš¡): +25% conversione, -30% decay coscienza, 10â‚¬/10s&#10;&#10;âš ï¸ Se non hai abbastanza soldi, smettono di lavorare!">
          <span class="stat-icon">ğŸ¤</span>
          <div class="stat-content">
            <div class="stat-label">Compagni</div>
            <div class="stat-value" id="comrades-overlay">0</div>
          </div>
        </div>
        
        <div class="stat-item" title="Tempo tra uno spawn e l'altro di nuovi cittadini.&#10;&#10;PiÃ¹ Ã¨ basso, piÃ¹ veloce Ã¨ il flusso di visitatori.&#10;&#10;Influenzato da:&#10;â€¢ Numero di tematiche attive&#10;â€¢ Eventi casuali&#10;â€¢ Fase di gioco">
          <span class="stat-icon">âš¡</span>
          <div class="stat-content">
            <div class="stat-label">Spawn</div>
            <div class="stat-value" id="spawn-rate-overlay">2.5s</div>
          </div>
        </div>
        
        <div class="stat-item" title="Risorsa necessaria per azioni del movimento.&#10;&#10;Si ottiene da:&#10;â€¢ Conversioni (+1)&#10;â€¢ Espansioni dello spazio&#10;&#10;Si usa per:&#10;â€¢ Assemblee&#10;â€¢ Stampa tematiche&#10;â€¢ Espansioni">
          <span class="stat-icon">âš¡</span>
          <div class="stat-content">
            <div class="stat-label">Influenza</div>
            <div class="stat-value" id="influence-overlay">30</div>
          </div>
        </div>
        
        <div class="stat-item" title="Numero totale di cittadini convertiti alla causa.&#10;&#10;I convertiti donano fondi passivamente in base al loro tipo:&#10;â€¢ Lavoratore: 0.20â‚¬/10s&#10;â€¢ Precario: 0.15â‚¬/10s&#10;â€¢ Disoccupato: 0.03â‚¬/10s&#10;â€¢ Studente: 0.05â‚¬/10s&#10;â€¢ Intellettuale: 0.10â‚¬/10s&#10;&#10;Possono abbandonare se la coscienza Ã¨ bassa!">
          <span class="stat-icon">ğŸš©</span>
          <div class="stat-content">
            <div class="stat-label">Convertiti</div>
            <div class="stat-value" id="converts-overlay">0</div>
          </div>
        </div>
        
        <div class="stat-item" title="La coscienza di classe influenza la stabilitÃ  dei convertiti.&#10;&#10;â‰¥70%: StabilitÃ  alta, pochi abbandoni&#10;50-70%: StabilitÃ  normale, abbandoni naturali (1%)&#10;30-50%: StabilitÃ  bassa, abbandoni frequenti (3%)&#10;<30%: CRITICO! Abbandoni massivi (8%)">
          <span class="stat-icon">ğŸ§ </span>
          <div class="stat-content">
            <div class="stat-label">Coscienza di Classe</div>
            <div class="stat-value" id="consciousness-overlay">50%</div>
          </div>
        </div>
        
        <div class="stat-item" title="Potere delle assemblee collettive. Aumenta organizzando assemblee e dura per tutta la fase.&#10;&#10;LIVELLI BONUS:&#10;&#10;ğŸ”¥ Livello 1 (1-25%):&#10;â€¢ +5% probabilitÃ  conversioni&#10;&#10;ğŸ”¥ Livello 2 (25-50%):&#10;â€¢ +10% probabilitÃ  conversioni&#10;â€¢ -10% decay coscienza&#10;&#10;ğŸ”¥ğŸ”¥ Livello 3 (50-75%):&#10;â€¢ +15% probabilitÃ  conversioni&#10;â€¢ -20% decay coscienza&#10;â€¢ +5% donazioni&#10;&#10;ğŸ”¥ğŸ”¥ğŸ”¥ Livello 4 (75-100%):&#10;â€¢ +20% probabilitÃ  conversioni&#10;â€¢ -30% decay coscienza&#10;â€¢ +10% donazioni">
          <span class="stat-icon">ğŸ“¢</span>
          <div class="stat-content">
            <div class="stat-label">Potere Assembleare</div>
            <div class="stat-value" id="assembly-power-overlay">0%</div>
          </div>
        </div>
      </div>
      
      <!-- BOTTOM BAR - Azioni -->
      <div class="action-toolbar">
        <button id="assembly-overlay" class="overlay-btn" title="Organizza un'assemblea per aumentare il Potere Assembleare.&#10;&#10;Effetto: +25% Potere Assembleare (permanente per la fase)&#10;Costo: 50âš¡ (aumenta ogni uso: +60%)&#10;&#10;Il Potere Assembleare fornisce bonus permanenti:&#10;â€¢ Aumenta probabilitÃ  conversioni (fino a +20%)&#10;â€¢ Riduce decay coscienza (fino a -30%)&#10;â€¢ Aumenta donazioni (fino a +10%)&#10;&#10;Investi presto per massimizzare i benefici!">
          <span class="overlay-icon">ğŸ“¢</span>
          <span class="overlay-label">Assemblea</span>
          <span class="overlay-cost" id="assembly-cost-overlay">50âš¡</span>
        </button>
        
        <button id="restock-all-overlay" class="overlay-btn" title="Stampa volantini, opuscoli e materiale propagandistico.&#10;&#10;Rifornisce tutte le tematiche di +10 stock&#10;Costo: Somma dei costi di tutte le tematiche&#10;&#10;Utile quando il materiale scarseggia per:&#10;â€¢ Evitare che i cittadini vadano via delusi&#10;â€¢ Mantenere alto il flusso di conversioni">
          <span class="overlay-icon">ğŸ“„</span>
          <span class="overlay-label">Stampa</span>
          <span class="overlay-cost" id="restock-cost-overlay">0â‚¬</span>
        </button>
        
        <button id="expand-overlay" class="overlay-btn" title="Espandi la capacitÃ  del circolo.&#10;&#10;+5 CapacitÃ  massima cittadini&#10;Costo: 100âš¡ (raddoppia ogni uso)&#10;&#10;Utile quando il circolo Ã¨ sempre pieno per:&#10;â€¢ Permettere piÃ¹ conversioni simultanee&#10;â€¢ Evitare code e impazienza&#10;â€¢ Scalare il movimento">
          <span class="overlay-icon">ğŸ—ï¸</span>
          <span class="overlay-label">Espandi</span>
          <span class="overlay-cost" id="expand-cost-overlay">100âš¡</span>
        </button>
      </div>
      
      <!-- LOG ATTIVITÃ€ CANVAS - Posizionato in basso a sinistra -->
      <div class="canvas-log-panel">
        <div class="canvas-log-header">ğŸ“œ Log AttivitÃ </div>
        <div id="canvas-log" class="canvas-log-content"></div>
      </div>
    </div>
  </div>
  <div id="ui">
    <!-- HEADER -->
    <div class="header">
      <div class="game-title-compact">
        <span class="title-icon">ğŸš©</span>
        <div>
          <div class="title-main">
            Red Tide
            <span class="version-badge" id="version-badge">v0.1.0</span>
          </div>
          <div class="title-sub">Revolution Simulator</div>
        </div>
      </div>
    </div>

    <!-- PHASE INFO -->
    <div class="phase-info">
      <div class="phase-name" id="phase-name">FASE 1: IL CIRCOLO</div>
      
      <!-- Obiettivo Converti -->
      <div class="phase-objective">
        <div class="objective-header">
          <span class="objective-label">âœŠ Convertiti</span>
          <span class="objective-values">
            <span id="phase-converts">0</span>/<span id="phase-converts-goal">50</span>
          </span>
        </div>
        <div class="progress-bar modern">
          <div class="progress-fill converts" id="phase-converts-bar" style="width: 0%"></div>
        </div>
      </div>
      
      <!-- Obiettivo Influenza -->
      <div class="phase-objective">
        <div class="objective-header">
          <span class="objective-label">âš¡ Influenza</span>
          <span class="objective-values">
            <span id="phase-influence">100</span>/<span id="phase-influence-goal">500</span>
          </span>
        </div>
        <div class="progress-bar modern">
          <div class="progress-fill influence" id="phase-influence-bar" style="width: 20%"></div>
        </div>
      </div>
    </div>

    <div class="divider"></div>

    <!-- LOG ATTIVITÃ€ - Spostato qui per maggiore visibilitÃ  -->
    <div class="panel log-panel">
      <div class="panel-title">ğŸ“œ Log AttivitÃ </div>
      <div id="log" class="log-content"></div>
    </div>
    
    <div class="divider"></div>
    
    <!-- DONATION BREAKDOWN -->
    <div class="panel donation-panel">
      <div class="panel-title">ğŸ’° Bilancio Economico (ogni 10s)</div>
      
      <!-- ENTRATE -->
      <div class="panel-subtitle" style="color: #4ade80; margin-bottom: 8px;">ğŸ“ˆ ENTRATE</div>
      <div id="donation-breakdown" class="donation-list">
        <!-- Popolato dinamicamente -->
      </div>
      
      <div class="donation-total" style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 8px; margin-bottom: 16px;">
        <span class="donation-label">Totale Entrate</span>
        <span class="donation-value" id="donation-total" style="color: #4ade80;">+0.0â‚¬/10s</span>
      </div>
      
      <!-- USCITE -->
      <div class="panel-subtitle" style="color: #ef4444; margin-bottom: 8px;">ğŸ“‰ USCITE</div>
      <div id="upkeep-breakdown" class="donation-list">
        <!-- Popolato dinamicamente -->
      </div>
      
      <div class="donation-total" style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 8px; margin-bottom: 16px;">
        <span class="donation-label">Totale Uscite</span>
        <span class="donation-value" id="upkeep-total" style="color: #ef4444;">-0.0â‚¬/10s</span>
      </div>
      
      <!-- BILANCIO NETTO -->
      <div class="donation-total" style="border-top: 2px solid var(--accent-red); padding-top: 8px; font-weight: bold;">
        <span class="donation-label">ğŸ’µ BILANCIO NETTO</span>
        <span class="donation-value" id="net-balance">+0.0â‚¬/10s</span>
      </div>
    </div>
    
    <div class="divider"></div>
    
    <!-- CONVERSION STATISTICS -->
    <div class="panel conversion-stats">
      <div class="panel-title">ğŸ“ˆ Statistiche Conversioni</div>
      
      <div class="conversion-breakdown">
        <div class="conversion-row">
          <span class="conversion-type">ğŸŸ¢ Ricettivi</span>
          <span class="conversion-count" id="converts-receptive">0</span>
        </div>
        <div class="conversion-row">
          <span class="conversion-type">ğŸŸ¡ Neutrali</span>
          <span class="conversion-count" id="converts-neutral">0</span>
        </div>
        <div class="conversion-row">
          <span class="conversion-type">ğŸ”´ Scettici</span>
          <span class="conversion-count" id="converts-skeptical">0</span>
        </div>
      </div>
      
      <div class="success-rate">
        <span class="success-label">Tasso di Successo</span>
        <span class="success-value" id="success-rate">0%</span>
      </div>
    </div>
    
    <div class="divider"></div>
    
    <!-- CITIZEN TYPES LEGEND -->
    <div class="panel citizen-legend">
      <div class="panel-title">ğŸ‘¥ Tipi di Cittadini</div>
      
      <div class="legend-grid">
        <div class="legend-item">
          <span class="legend-color" style="background: #3498db;"></span>
          <span class="legend-label">Studente</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #e67e22;"></span>
          <span class="legend-label">Lavoratore</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #95a5a6;"></span>
          <span class="legend-label">Disoccupato</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #9b59b6;"></span>
          <span class="legend-label">Freelancer</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #1abc9c;"></span>
          <span class="legend-label">Pensionato</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #f1c40f;"></span>
          <span class="legend-label">Intellettuale</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #e74c3c;"></span>
          <span class="legend-label">Attivista</span>
        </div>
      </div>
    </div>
    
    <div class="divider"></div>

    <!-- TOPICS -->
    <div class="panel topics-panel">
      <div class="panel-title">ğŸ“š Tematiche Disponibili</div>
      <div id="topics-list" class="topics-grid"></div>
    </div>

    <div class="divider"></div>

    <!-- COMRADES -->
    <div class="panel comrades-panel">
      <div class="panel-title">âœŠ Compagni</div>
      <div id="comrades-list" class="comrades-grid"></div>
      <div class="comrades-available">
        <div class="panel-subtitle">Assumi nuovi compagni:</div>
        <div id="available-comrades" class="available-grid"></div>
      </div>
    </div>

    <div class="divider"></div>

    <!-- ACTIONS -->
    <div class="panel actions-panel">
      <div class="panel-title">ğŸ¯ Azioni</div>
      <div class="action-buttons">
        <button id="assembly" class="action-btn primary" title="Organizza un'assemblea per aumentare il Potere Assembleare.&#10;&#10;Effetto: +25% Potere Assembleare (permanente per la fase)&#10;Costo: 50âš¡ (aumenta ogni uso: +60%)&#10;&#10;Il Potere Assembleare fornisce bonus permanenti:&#10;â€¢ Aumenta probabilitÃ  conversioni (fino a +20%)&#10;â€¢ Riduce decay coscienza (fino a -30%)&#10;â€¢ Aumenta donazioni (fino a +10%)&#10;&#10;Investi presto per massimizzare i benefici!">
          <span class="btn-icon">ğŸ“¢</span>
          <div class="btn-content">
            <div class="btn-title">Assemblea Pubblica</div>
            <div class="btn-subtitle"><span id="assembly-cost">50</span>âš¡ â€¢ +25% Potere</div>
          </div>
        </button>
        
        <button id="restock-all" class="action-btn secondary" title="Stampa volantini, opuscoli e materiale propagandistico.&#10;&#10;Rifornisce tutte le tematiche di +10 stock&#10;Costo: Somma dei costi di tutte le tematiche&#10;&#10;Utile quando il materiale scarseggia per:&#10;â€¢ Evitare che i cittadini vadano via delusi&#10;â€¢ Mantenere alto il flusso di conversioni">
          <span class="btn-icon">ğŸ“„</span>
          <div class="btn-content">
            <div class="btn-title">Stampa Volantini</div>
            <div class="btn-subtitle">Rifornisci tutte le tematiche (+10)</div>
          </div>
        </button>
        
        <button id="expand" class="action-btn tertiary" title="Espandi la capacitÃ  del circolo.&#10;&#10;+5 CapacitÃ  massima cittadini&#10;Costo: 100âš¡ (raddoppia ogni uso)&#10;&#10;Utile quando il circolo Ã¨ sempre pieno per:&#10;â€¢ Permettere piÃ¹ conversioni simultanee&#10;â€¢ Evitare code e impazienza&#10;â€¢ Scalare il movimento">
          <span class="btn-icon">ğŸ—ï¸</span>
          <div class="btn-content">
            <div class="btn-title">Espandi Circolo</div>
            <div class="btn-subtitle"><span id="expand-cost">100</span>âš¡ â€¢ +5 CapacitÃ </div>
          </div>
        </button>
      </div>
      
      <div class="section-separator"></div>
      
      <div class="panel-title">âš™ï¸ Strumenti</div>
      <div class="utility-buttons">
        <button id="save-game" class="utility-btn">ğŸ’¾ Salva</button>
        <button id="reset-game" class="utility-btn danger">ğŸ”„ Reset</button>
        <button id="clear-citizens" class="utility-btn" style="display:none">ğŸ§¹ Clear</button>
      </div>
    </div>

  </div>
</div>

<script type="module" src="src/revolution-main.js"></script>
</body>
</html>
